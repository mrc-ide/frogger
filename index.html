<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multistate Population Projection Model for Demographic and HIV Estimation • frogger</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Multistate Population Projection Model for Demographic and HIV Estimation">
<meta property="og:description" content="Frogger is a multistate population projection model for estimating population, demographic indicators, and HIV epidemic. The model combines a standard cohort component model of population projection (CCMPP) with a multistate model for HIV infection, disease progression, and treatment. Statistical tools are implemented for joint inference from multiple demographic and epidemiologic data sources.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">frogger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mrc-ide/frogger/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="frogger">frogger<a class="anchor" aria-label="anchor" href="#frogger"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install <code>frogger</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"mrc-ide/frogger"</span>, upgrade <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="todo">TODO<a class="anchor" aria-label="anchor" href="#todo"></a>
</h2>
<ul>
<li>Improve variable names!</li>
<li>Restructuring the model code to identify more common code
<ul>
<li>There are examples like general demographic projection and hiv population demographic projection which are running similar processes like ageing, non HIV mortality, migration. We should be able to write a function for e.g. ageing which we can run on each of our population matrices. Even for the HIV and ART stratified we can add overloaded function to work with higher dimension data</li>
</ul>
</li>
<li>Add a test that checks that no <code>double</code>s are used in <code>inst/include</code> dir. We should be using templated <code>real_type</code> for TMB</li>
<li>Add a broad level overview of the algorithm - is there a diagram available?</li>
<li>Convert string flags to the model to enums if we need to switch on them in several places. This should make it easier to reason about in C++ world and isolate the string checking to a single place</li>
<li>Update <code>gender</code> terminology to sex</li>
<li>Previously <code>hiv_negative_pop</code> was fixed size by having dimensions specified by template, how much does this speed up the code? Is there a better way to do this?</li>
<li>Tidy up confusing looping see <a href="https://github.com/mrc-ide/frogger/pull/7#discussion_r1217847753" class="external-link uri">https://github.com/mrc-ide/frogger/pull/7#discussion_r1217847753</a>
</li>
<li>Add R casting helpers which return better errors than Rcpp see <a href="https://github.com/mrc-ide/frogger/pull/7#discussion_r1217884684" class="external-link uri">https://github.com/mrc-ide/frogger/pull/7#discussion_r1217884684</a>
</li>
<li>Add a helper to do 0 to base 1 conversion and check upper bounds see <a href="https://github.com/mrc-ide/frogger/pull/7#discussion_r1217888684" class="external-link uri">https://github.com/mrc-ide/frogger/pull/7#discussion_r1217888684</a>
</li>
<li>Review what we pass as parameters - can some of these be computed in the struct ctor? e.g. <a href="https://github.com/mrc-ide/frogger/pull/7#discussion_r1217890466" class="external-link uri">https://github.com/mrc-ide/frogger/pull/7#discussion_r1217890466</a>
</li>
<li>Refactor <code>OutputState</code> to take a struct of state-space dimensions instead of unpacking the subset of parameters we need. See <a href="https://github.com/mrc-ide/frogger/pull/12#discussion_r1245170775" class="external-link uri">https://github.com/mrc-ide/frogger/pull/12#discussion_r1245170775</a>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="leapfrog-to-frogger-glossary">Leapfrog to Frogger glossary<a class="anchor" aria-label="anchor" href="#leapfrog-to-frogger-glossary"></a>
</h2>
<div class="section level3">
<h3 id="stratifications">Stratifications<a class="anchor" aria-label="anchor" href="#stratifications"></a>
</h3>
<table class="table">
<colgroup>
<col width="15%">
<col width="27%">
<col width="57%">
</colgroup>
<thead><tr class="header">
<th>Leapfrog</th>
<th>Frogger</th>
<th>Details</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>NG</td>
<td>num_genders</td>
<td>Number of genders</td>
</tr>
<tr class="even">
<td>pAG</td>
<td>age_groups_pop</td>
<td>Number of age groups in population, 81 for 0 to 80+</td>
</tr>
<tr class="odd">
<td>pIDX_FERT</td>
<td>fertility_first_age_group</td>
<td>First age group index eligible for fertility</td>
</tr>
<tr class="even">
<td>pAG_FERT</td>
<td>age_groups_fertiity</td>
<td>Number of ages eligible for fertility</td>
</tr>
<tr class="odd">
<td>pIDX_HIVADULT</td>
<td>hiv_adult_first_age_group</td>
<td>Index of the first age group to be considered an adult</td>
</tr>
<tr class="even">
<td>hAG</td>
<td>age_groups_hiv</td>
<td>Number of age groups in HIV population</td>
</tr>
<tr class="odd">
<td>hDS</td>
<td>disease_stages</td>
<td>Number of disease stages</td>
</tr>
<tr class="even">
<td>hTS</td>
<td>treatment_stages</td>
<td>Number of treatment stages</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="model-settings">Model settings<a class="anchor" aria-label="anchor" href="#model-settings"></a>
</h3>
<table class="table">
<colgroup>
<col width="26%">
<col width="27%">
<col width="46%">
</colgroup>
<thead><tr class="header">
<th>Leapfrog</th>
<th>Frogger</th>
<th>Details</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>sim_years</td>
<td>sim_years</td>
<td>Number of simulation years to run</td>
</tr>
<tr class="even">
<td>hiv_steps_per_year</td>
<td>hiv_steps_per_year</td>
<td></td>
</tr>
<tr class="odd">
<td>t_ART_start</td>
<td>time_art_start</td>
<td>Time step to start modelling ART</td>
</tr>
<tr class="even">
<td>hAG_SPAN</td>
<td>hiv_age_groups_span</td>
<td>Array of HIV age group sizes</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="input-data">Input data<a class="anchor" aria-label="anchor" href="#input-data"></a>
</h3>
<table class="table">
<colgroup>
<col width="13%">
<col width="20%">
<col width="65%">
</colgroup>
<thead><tr class="header">
<th>Leapfrog</th>
<th>Frogger</th>
<th>Details</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>basepop</td>
<td>base_pop</td>
<td>Population data by age group and sex</td>
</tr>
<tr class="even">
<td>sx</td>
<td>Survival</td>
<td>Probability of surviving between ages, from 0 to 1, 1 to 2, …, 79 to 80+ and 80+ to 80+</td>
</tr>
<tr class="odd">
<td>netmigr</td>
<td>net_migration</td>
<td>Net migration by age group, sex and year</td>
</tr>
<tr class="even">
<td>asfr</td>
<td>age_sex_fertility_ratio</td>
<td>Ratio of number of live births in a year and the whole female population of childbearing age</td>
</tr>
<tr class="odd">
<td>births_sex_prop</td>
<td>births_sex_prop</td>
<td></td>
</tr>
<tr class="even">
<td>incidinput</td>
<td>incidence_rate</td>
<td></td>
</tr>
<tr class="odd">
<td>incrr_sex</td>
<td>incidence_relative_risk_sex</td>
<td>Relative risk of incidence by sex</td>
</tr>
<tr class="even">
<td>incrr_age</td>
<td>incidence_relative_risk_age</td>
<td>Relative risk of incidence by age</td>
</tr>
<tr class="odd">
<td>cd4_initdist</td>
<td>?</td>
<td>Distribution of infections by cd4 category upon infection</td>
</tr>
<tr class="even">
<td>cd4_prog</td>
<td>cd4_progression</td>
<td></td>
</tr>
<tr class="odd">
<td>cd4_mort</td>
<td>cd4_mortality</td>
<td></td>
</tr>
<tr class="even">
<td>art_mort</td>
<td>art_mortality</td>
<td></td>
</tr>
<tr class="odd">
<td>artmx_timerr</td>
<td>?</td>
<td></td>
</tr>
<tr class="even">
<td>art15plus_num</td>
<td>?</td>
<td></td>
</tr>
<tr class="odd">
<td>art15plus_isperc</td>
<td>?</td>
<td></td>
</tr>
<tr class="even">
<td>artcd4elig_idx</td>
<td>?</td>
<td></td>
</tr>
<tr class="odd">
<td>art_alloc_method</td>
<td>?</td>
<td></td>
</tr>
<tr class="even">
<td>art_alloc_mxweight</td>
<td>?</td>
<td></td>
</tr>
<tr class="odd">
<td>scale_cd4_mort</td>
<td>scale_cd4_mortality</td>
<td></td>
</tr>
<tr class="even">
<td>art_dropout</td>
<td>?</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="outputs">Outputs<a class="anchor" aria-label="anchor" href="#outputs"></a>
</h3>
<table class="table">
<colgroup>
<col width="18%">
<col width="20%">
<col width="60%">
</colgroup>
<thead><tr class="header">
<th>Leapfrog</th>
<th>Frogger</th>
<th>Details</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>totpop1</td>
<td>total_population</td>
<td>Projected total population</td>
</tr>
<tr class="even">
<td>hivpop1</td>
<td>hiv_population</td>
<td>Projected HIV population</td>
</tr>
<tr class="odd">
<td>infections</td>
<td>infections</td>
<td></td>
</tr>
<tr class="even">
<td>hivstrat_adult</td>
<td>hiv_strat_adult</td>
<td></td>
</tr>
<tr class="odd">
<td>artstrat_adult</td>
<td>art_strat_adult</td>
<td></td>
</tr>
<tr class="even">
<td>births</td>
<td>births</td>
<td>Projected number of births</td>
</tr>
<tr class="odd">
<td>natdeaths</td>
<td>natural_deaths</td>
<td>Projected number of natural deaths</td>
</tr>
<tr class="even">
<td>natdeaths_hivpop</td>
<td>hiv_natural_deaths</td>
<td>Projected number of natural deaths within HIV population</td>
</tr>
<tr class="odd">
<td>hivdeaths</td>
<td>hiv_deaths</td>
<td></td>
</tr>
<tr class="even">
<td>aidsdeaths_noart</td>
<td>aids_deaths_no_art</td>
<td></td>
</tr>
<tr class="odd">
<td>aidsdeaths_art</td>
<td>aids_deaths_art</td>
<td></td>
</tr>
<tr class="even">
<td>artinit</td>
<td>art_initiation</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="internal">Internal<a class="anchor" aria-label="anchor" href="#internal"></a>
</h3>
<table class="table">
<colgroup>
<col width="20%">
<col width="24%">
<col width="55%">
</colgroup>
<thead><tr class="header">
<th>Leapfrog</th>
<th>Frogger</th>
<th>Details</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ART0MOS</td>
<td>?</td>
<td></td>
</tr>
<tr class="even">
<td>pIDX_INCIDPOP</td>
<td>adult_incidence_first_age_group</td>
<td>Index of youngest age that is reflected in the adult incidence input</td>
</tr>
<tr class="odd">
<td>pAG_INCIDPOP</td>
<td>?</td>
<td></td>
</tr>
<tr class="even">
<td>hAG_15PLUS</td>
<td>age_groups_hiv_15plus</td>
<td></td>
</tr>
<tr class="odd">
<td>hIDX_15PLUS</td>
<td>hIDX_15PLUS</td>
<td></td>
</tr>
<tr class="even">
<td>h_art_stage_dur</td>
<td>?</td>
<td></td>
</tr>
<tr class="odd">
<td>everARTelig_idx</td>
<td>everARTelig_idx</td>
<td></td>
</tr>
<tr class="even">
<td>migrate_ag</td>
<td>migration_rate</td>
<td>Rate people migrate into population by age and sex</td>
</tr>
<tr class="odd">
<td>sx_netmig</td>
<td>survival_netmig</td>
<td></td>
</tr>
<tr class="even">
<td>births_sex</td>
<td>births_sex</td>
<td></td>
</tr>
<tr class="odd">
<td>migrate_a0</td>
<td>migration_rate_a0</td>
<td></td>
</tr>
<tr class="even">
<td>hiv_ag_prob</td>
<td>hiv_age_up_prob</td>
<td>Probability of aging from one group to the next in HIV age stratification</td>
</tr>
<tr class="odd">
<td>hivpop_ha(ha, g)</td>
<td>hiv_population_coarse_ages</td>
<td></td>
</tr>
<tr class="even">
<td>netmig_ag</td>
<td>hiv_net_migration</td>
<td></td>
</tr>
<tr class="odd">
<td>deathsmig_ha</td>
<td>deaths_migrate</td>
<td></td>
</tr>
<tr class="even">
<td>deathmigrate_ha</td>
<td>deaths_migrate_rate</td>
<td></td>
</tr>
<tr class="odd">
<td>cd4elig_idx</td>
<td>?</td>
<td>Index of the maximum CD4 count category eligible for ART</td>
</tr>
<tr class="even">
<td>anyelig_idx</td>
<td>anyelig_idx</td>
<td></td>
</tr>
<tr class="odd">
<td>everARTelig_idx</td>
<td>?</td>
<td></td>
</tr>
<tr class="even">
<td>infections_ts</td>
<td>infections_ts</td>
<td>Infections occurring at a specific time step</td>
</tr>
<tr class="odd">
<td>hivn_ag</td>
<td>hiv_negative_pop</td>
<td>HIV negative population for a given age and sex</td>
</tr>
<tr class="even">
<td>Xhivn</td>
<td>hiv_neg_aggregate</td>
<td></td>
</tr>
<tr class="odd">
<td>Xhivn_incagerr</td>
<td>?</td>
<td></td>
</tr>
<tr class="even">
<td>incrate_i</td>
<td></td>
<td>Incidence rate input</td>
</tr>
<tr class="odd">
<td>incrate_g</td>
<td>incidence_rate_sex</td>
<td>Incidence rate by sex</td>
</tr>
<tr class="even">
<td>hivdeaths_ha</td>
<td>hiv_deaths_age_sex</td>
<td></td>
</tr>
<tr class="odd">
<td>grad</td>
<td>grad</td>
<td>Movement between cd4 categories at a given time step</td>
</tr>
<tr class="even">
<td>artpop_hahm</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>cd4mx_scale</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>infections_a</td>
<td>infections_a</td>
<td></td>
</tr>
<tr class="odd">
<td>infections_ha</td>
<td>infections_ha</td>
<td></td>
</tr>
<tr class="even">
<td>gradART</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>artelig_hahm</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Xart_15plus</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Xartelig_15plus</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>expect_mort_artelig15plus</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>artnum_hts</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>artcov_hts</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>curr_coverage</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>artinit_hts</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>artinit_hahm</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>hivpop_ha(ha)</td>
<td>hivpop_ha</td>
<td>HIV population by coarse HIV age group stratification</td>
</tr>
<tr class="odd">
<td>hivqx_ha</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>hivdeaths_a</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT © Imperial College of Science, Technology and Medicine</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mrc-ide/frogger/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mrc-ide/frogger/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing frogger</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Robert Ashton <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#concept" class="external-link"><img src="https://www.repostatus.org/badges/latest/concept.svg" alt="Project Status: Concept – Minimal or no implementation has been done yet, or the repository is only intended to be a limited example, demo, or proof-of-concept."></a></li>
<li><a href="https://github.com/mrc-ide/frogger/actions" class="external-link"><img src="https://github.com/mrc-ide/frogger/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://codecov.io/github/mrc-ide/frogger?branch=main" class="external-link"><img src="https://codecov.io/github/mrc-ide/frogger/coverage.svg?branch=main" alt="codecov.io"></a></li>
<li><a href="https://www.codefactor.io/repository/github/mrc-ide/frogger" class="external-link"><img src="https://www.codefactor.io/repository/github/mrc-ide/frogger/badge" alt="CodeFactor"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Robert Ashton.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
