// Generated by frogger: do not edit by hand
// This file is automatically generated. Do not edit this file. If you want to make changes
// edit `model_output.hpp.in` and run `./scripts/generate` to regenerate.

#pragma once

#include <Rcpp.h>
#include <unsupported/Eigen/CXX11/Tensor>

#include "state_saver.hpp"
#include "r_utils.hpp"

template<typename ModelVariant, typename real_type>
Rcpp::List build_r_output(const leapfrog::OutputState<ModelVariant, real_type> &state,
                          const std::vector<int> save_steps) {
  size_t output_years = save_steps.size();
  constexpr auto ss = leapfrog::StateSpace<ModelVariant>();
  constexpr auto base = ss.base;
  Rcpp::NumericVector r_p_total_pop(base.pAG * base.NS * output_years);
  Rcpp::NumericVector r_births(output_years);
<<<<<<< HEAD
  Rcpp::NumericVector r_p_total_pop_natural_deaths(pAG * NS * output_years);
  Rcpp::NumericVector r_p_hiv_pop(pAG * NS * output_years);
  Rcpp::NumericVector r_p_hiv_pop_natural_deaths(pAG * NS * output_years);
  Rcpp::NumericVector r_h_hiv_adult(hDS * hAG * NS * output_years);
  Rcpp::NumericVector r_h_art_adult(hTS * hDS * hAG * NS * output_years);
  Rcpp::NumericVector r_h_hiv_deaths_no_art(hDS * hAG * NS * output_years);
  Rcpp::NumericVector r_p_infections(pAG * NS * output_years);
  Rcpp::NumericVector r_h_hiv_deaths_art(hTS * hDS * hAG * NS * output_years);
  Rcpp::NumericVector r_h_art_initiation(hDS * hAG * NS * output_years);
  Rcpp::NumericVector r_p_hiv_deaths(pAG * NS * output_years);
  Rcpp::NumericVector r_hc1_hiv_pop(hc1DS * hcTT * hc1AG * NS * output_years);
  Rcpp::NumericVector r_hc2_hiv_pop(hc2DS * hcTT * hc2AG * NS * output_years);
  Rcpp::NumericVector r_hc1_art_pop(hTS * hc1DS * hc1AG * NS * output_years);
  Rcpp::NumericVector r_hc2_art_pop(hTS * hc2DS * hc2AG * NS * output_years);
  Rcpp::NumericVector r_hc1_noart_aids_deaths(hc1DS * hcTT * hc1AG * NS * output_years);
  Rcpp::NumericVector r_hc2_noart_aids_deaths(hc2DS * hcTT * hc2AG * NS * output_years);
  Rcpp::NumericVector r_hc1_art_aids_deaths(hTS * hc1DS * hc1AG * NS * output_years);
  Rcpp::NumericVector r_hc2_art_aids_deaths(hTS * hc2DS * hc2AG * NS * output_years);
  Rcpp::NumericVector r_hc_art_num(output_years);

  r_p_total_pop.attr("dim") = Rcpp::NumericVector::create(pAG, NS, output_years);
  r_births.attr("dim") = Rcpp::NumericVector::create(output_years);
  r_p_total_pop_natural_deaths.attr("dim") = Rcpp::NumericVector::create(pAG, NS, output_years);
  r_p_hiv_pop.attr("dim") = Rcpp::NumericVector::create(pAG, NS, output_years);
  r_p_hiv_pop_natural_deaths.attr("dim") = Rcpp::NumericVector::create(pAG, NS, output_years);
  r_h_hiv_adult.attr("dim") = Rcpp::NumericVector::create(hDS, hAG, NS, output_years);
  r_h_art_adult.attr("dim") = Rcpp::NumericVector::create(hTS, hDS, hAG, NS, output_years);
  r_h_hiv_deaths_no_art.attr("dim") = Rcpp::NumericVector::create(hDS, hAG, NS, output_years);
  r_p_infections.attr("dim") = Rcpp::NumericVector::create(pAG, NS, output_years);
  r_h_hiv_deaths_art.attr("dim") = Rcpp::NumericVector::create(hTS, hDS, hAG, NS, output_years);
  r_h_art_initiation.attr("dim") = Rcpp::NumericVector::create(hDS, hAG, NS, output_years);
  r_p_hiv_deaths.attr("dim") = Rcpp::NumericVector::create(pAG, NS, output_years);
  r_hc1_hiv_pop.attr("dim") = Rcpp::NumericVector::create(hc1DS, hcTT, hc1AG, NS, output_years);
  r_hc2_hiv_pop.attr("dim") = Rcpp::NumericVector::create(hc2DS, hcTT, hc2AG, NS, output_years);
  r_hc1_art_pop.attr("dim") = Rcpp::NumericVector::create(hTS, hc1DS, hc1AG, NS, output_years);
  r_hc2_art_pop.attr("dim") = Rcpp::NumericVector::create(hTS, hc2DS, hc2AG, NS, output_years);
  r_hc1_noart_aids_deaths.attr("dim") = Rcpp::NumericVector::create(hc1DS, hcTT, hc1AG, NS, output_years);
  r_hc2_noart_aids_deaths.attr("dim") = Rcpp::NumericVector::create(hc2DS, hcTT, hc2AG, NS, output_years);
  r_hc1_art_aids_deaths.attr("dim") = Rcpp::NumericVector::create(hTS, hc1DS, hc1AG, NS, output_years);
  r_hc2_art_aids_deaths.attr("dim") = Rcpp::NumericVector::create(hTS, hc2DS, hc2AG, NS, output_years);
  r_hc_art_num.attr("dim") = Rcpp::NumericVector::create(output_years);

  std::copy_n(state.p_total_pop.data(), state.p_total_pop.size(), REAL(r_p_total_pop));
  std::copy_n(state.births.data(), state.births.size(), REAL(r_births));
  std::copy_n(state.p_total_pop_natural_deaths.data(), state.p_total_pop_natural_deaths.size(), REAL(r_p_total_pop_natural_deaths));
  std::copy_n(state.p_hiv_pop.data(), state.p_hiv_pop.size(), REAL(r_p_hiv_pop));
  std::copy_n(state.p_hiv_pop_natural_deaths.data(), state.p_hiv_pop_natural_deaths.size(), REAL(r_p_hiv_pop_natural_deaths));
  std::copy_n(state.h_hiv_adult.data(), state.h_hiv_adult.size(), REAL(r_h_hiv_adult));
  std::copy_n(state.h_art_adult.data(), state.h_art_adult.size(), REAL(r_h_art_adult));
  std::copy_n(state.h_hiv_deaths_no_art.data(), state.h_hiv_deaths_no_art.size(), REAL(r_h_hiv_deaths_no_art));
  std::copy_n(state.p_infections.data(), state.p_infections.size(), REAL(r_p_infections));
  std::copy_n(state.h_hiv_deaths_art.data(), state.h_hiv_deaths_art.size(), REAL(r_h_hiv_deaths_art));
  std::copy_n(state.h_art_initiation.data(), state.h_art_initiation.size(), REAL(r_h_art_initiation));
  std::copy_n(state.p_hiv_deaths.data(), state.p_hiv_deaths.size(), REAL(r_p_hiv_deaths));
  std::copy_n(state.hc1_hiv_pop.data(), state.hc1_hiv_pop.size(), REAL(r_hc1_hiv_pop));
  std::copy_n(state.hc2_hiv_pop.data(), state.hc2_hiv_pop.size(), REAL(r_hc2_hiv_pop));
  std::copy_n(state.hc1_art_pop.data(), state.hc1_art_pop.size(), REAL(r_hc1_art_pop));
  std::copy_n(state.hc2_art_pop.data(), state.hc2_art_pop.size(), REAL(r_hc2_art_pop));
  std::copy_n(state.hc1_noart_aids_deaths.data(), state.hc1_noart_aids_deaths.size(), REAL(r_hc1_noart_aids_deaths));
  std::copy_n(state.hc2_noart_aids_deaths.data(), state.hc2_noart_aids_deaths.size(), REAL(r_hc2_noart_aids_deaths));
  std::copy_n(state.hc1_art_aids_deaths.data(), state.hc1_art_aids_deaths.size(), REAL(r_hc1_art_aids_deaths));
  std::copy_n(state.hc2_art_aids_deaths.data(), state.hc2_art_aids_deaths.size(), REAL(r_hc2_art_aids_deaths));
  std::copy_n(state.hc_art_num.data(), state.hc_art_num.size(), REAL(r_hc_art_num));

  List ret = ListBuilder()
    .add("p_total_pop", r_p_total_pop)
    .add("births", r_births)
    .add("p_total_pop_natural_deaths", r_p_total_pop_natural_deaths)
    .add("p_hiv_pop", r_p_hiv_pop)
    .add("p_hiv_pop_natural_deaths", r_p_hiv_pop_natural_deaths)
    .add("h_hiv_adult", r_h_hiv_adult)
    .add("h_art_adult", r_h_art_adult)
    .add("h_hiv_deaths_no_art", r_h_hiv_deaths_no_art)
    .add("p_infections", r_p_infections)
    .add("h_hiv_deaths_art", r_h_hiv_deaths_art)
    .add("h_art_initiation", r_h_art_initiation)
    .add("p_hiv_deaths", r_p_hiv_deaths)
    .add("hc1_hiv_pop", r_hc1_hiv_pop)
    .add("hc2_hiv_pop", r_hc2_hiv_pop)
    .add("hc1_art_pop", r_hc1_art_pop)
    .add("hc2_art_pop", r_hc2_art_pop)
    .add("hc1_noart_aids_deaths", r_hc1_noart_aids_deaths)
    .add("hc2_noart_aids_deaths", r_hc2_noart_aids_deaths)
    .add("hc1_art_aids_deaths", r_hc1_art_aids_deaths)
    .add("hc2_art_aids_deaths", r_hc2_art_aids_deaths)
    .add("hc_art_num", r_hc_art_num);
=======
  Rcpp::NumericVector r_p_total_pop_natural_deaths(base.pAG * base.NS * output_years);
  Rcpp::NumericVector r_p_hiv_pop(base.pAG * base.NS * output_years);
  Rcpp::NumericVector r_p_hiv_pop_natural_deaths(base.pAG * base.NS * output_years);
  Rcpp::NumericVector r_h_hiv_adult(base.hDS * base.hAG * base.NS * output_years);
  Rcpp::NumericVector r_h_art_adult(base.hTS * base.hDS * base.hAG * base.NS * output_years);
  Rcpp::NumericVector r_h_hiv_deaths_no_art(base.hDS * base.hAG * base.NS * output_years);
  Rcpp::NumericVector r_p_infections(base.pAG * base.NS * output_years);
  Rcpp::NumericVector r_h_hiv_deaths_art(base.hTS * base.hDS * base.hAG * base.NS * output_years);
  Rcpp::NumericVector r_h_art_initiation(base.hDS * base.hAG * base.NS * output_years);
  Rcpp::NumericVector r_p_hiv_deaths(base.pAG * base.NS * output_years);
  r_p_total_pop.attr("dim") = Rcpp::NumericVector::create(base.pAG, base.NS, output_years);
  r_births.attr("dim") = Rcpp::NumericVector::create(output_years);
  r_p_total_pop_natural_deaths.attr("dim") = Rcpp::NumericVector::create(base.pAG, base.NS, output_years);
  r_p_hiv_pop.attr("dim") = Rcpp::NumericVector::create(base.pAG, base.NS, output_years);
  r_p_hiv_pop_natural_deaths.attr("dim") = Rcpp::NumericVector::create(base.pAG, base.NS, output_years);
  r_h_hiv_adult.attr("dim") = Rcpp::NumericVector::create(base.hDS, base.hAG, base.NS, output_years);
  r_h_art_adult.attr("dim") = Rcpp::NumericVector::create(base.hTS, base.hDS, base.hAG, base.NS, output_years);
  r_h_hiv_deaths_no_art.attr("dim") = Rcpp::NumericVector::create(base.hDS, base.hAG, base.NS, output_years);
  r_p_infections.attr("dim") = Rcpp::NumericVector::create(base.pAG, base.NS, output_years);
  r_h_hiv_deaths_art.attr("dim") = Rcpp::NumericVector::create(base.hTS, base.hDS, base.hAG, base.NS, output_years);
  r_h_art_initiation.attr("dim") = Rcpp::NumericVector::create(base.hDS, base.hAG, base.NS, output_years);
  r_p_hiv_deaths.attr("dim") = Rcpp::NumericVector::create(base.pAG, base.NS, output_years);
  std::copy_n(state.base.p_total_pop.data(), state.base.p_total_pop.size(), REAL(r_p_total_pop));
  std::copy_n(state.base.births.data(), state.base.births.size(), REAL(r_births));
  std::copy_n(state.base.p_total_pop_natural_deaths.data(), state.base.p_total_pop_natural_deaths.size(), REAL(r_p_total_pop_natural_deaths));
  std::copy_n(state.base.p_hiv_pop.data(), state.base.p_hiv_pop.size(), REAL(r_p_hiv_pop));
  std::copy_n(state.base.p_hiv_pop_natural_deaths.data(), state.base.p_hiv_pop_natural_deaths.size(), REAL(r_p_hiv_pop_natural_deaths));
  std::copy_n(state.base.h_hiv_adult.data(), state.base.h_hiv_adult.size(), REAL(r_h_hiv_adult));
  std::copy_n(state.base.h_art_adult.data(), state.base.h_art_adult.size(), REAL(r_h_art_adult));
  std::copy_n(state.base.h_hiv_deaths_no_art.data(), state.base.h_hiv_deaths_no_art.size(), REAL(r_h_hiv_deaths_no_art));
  std::copy_n(state.base.p_infections.data(), state.base.p_infections.size(), REAL(r_p_infections));
  std::copy_n(state.base.h_hiv_deaths_art.data(), state.base.h_hiv_deaths_art.size(), REAL(r_h_hiv_deaths_art));
  std::copy_n(state.base.h_art_initiation.data(), state.base.h_art_initiation.size(), REAL(r_h_art_initiation));
  std::copy_n(state.base.p_hiv_deaths.data(), state.base.p_hiv_deaths.size(), REAL(r_p_hiv_deaths));

  Rcpp::List ret(12);
  Rcpp::CharacterVector names(12);
  names[0] = "p_total_pop";
  ret[0] = r_p_total_pop;
  names[1] = "births";
  ret[1] = r_births;
  names[2] = "p_total_pop_natural_deaths";
  ret[2] = r_p_total_pop_natural_deaths;
  names[3] = "p_hiv_pop";
  ret[3] = r_p_hiv_pop;
  names[4] = "p_hiv_pop_natural_deaths";
  ret[4] = r_p_hiv_pop_natural_deaths;
  names[5] = "h_hiv_adult";
  ret[5] = r_h_hiv_adult;
  names[6] = "h_art_adult";
  ret[6] = r_h_art_adult;
  names[7] = "h_hiv_deaths_no_art";
  ret[7] = r_h_hiv_deaths_no_art;
  names[8] = "p_infections";
  ret[8] = r_p_infections;
  names[9] = "h_hiv_deaths_art";
  ret[9] = r_h_hiv_deaths_art;
  names[10] = "h_art_initiation";
  ret[10] = r_h_art_initiation;
  names[11] = "p_hiv_deaths";
  ret[11] = r_p_hiv_deaths;
  ret.attr("names") = names;

  if constexpr (ModelVariant::run_child_model) {
    constexpr auto children = ss.children;
    constexpr auto base = ss.base;
    Rcpp::NumericVector r_hc1_hiv_pop(children.hc1DS * children.hcTT * children.hc1AG * base.NS * output_years);
    Rcpp::NumericVector r_hc2_hiv_pop(children.hc2DS * children.hcTT * children.hc2AG * base.NS * output_years);
    Rcpp::NumericVector r_hc1_art_pop(base.hTS * children.hc1DS * children.hc1AG * base.NS * output_years);
    Rcpp::NumericVector r_hc2_art_pop(base.hTS * children.hc2DS * children.hc2AG * base.NS * output_years);
    r_hc1_hiv_pop.attr("dim") = Rcpp::NumericVector::create(children.hc1DS, children.hcTT, children.hc1AG, base.NS, output_years);
    r_hc2_hiv_pop.attr("dim") = Rcpp::NumericVector::create(children.hc2DS, children.hcTT, children.hc2AG, base.NS, output_years);
    r_hc1_art_pop.attr("dim") = Rcpp::NumericVector::create(base.hTS, children.hc1DS, children.hc1AG, base.NS, output_years);
    r_hc2_art_pop.attr("dim") = Rcpp::NumericVector::create(base.hTS, children.hc2DS, children.hc2AG, base.NS, output_years);
    std::copy_n(state.children.hc1_hiv_pop.data(), state.children.hc1_hiv_pop.size(), REAL(r_hc1_hiv_pop));
    std::copy_n(state.children.hc2_hiv_pop.data(), state.children.hc2_hiv_pop.size(), REAL(r_hc2_hiv_pop));
    std::copy_n(state.children.hc1_art_pop.data(), state.children.hc1_art_pop.size(), REAL(r_hc1_art_pop));
    std::copy_n(state.children.hc2_art_pop.data(), state.children.hc2_art_pop.size(), REAL(r_hc2_art_pop));
    ret.push_back(r_hc1_hiv_pop, "hc1_hiv_pop");
    ret.push_back(r_hc2_hiv_pop, "hc2_hiv_pop");
    ret.push_back(r_hc1_art_pop, "hc1_art_pop");
    ret.push_back(r_hc2_art_pop, "hc2_art_pop");
  }

>>>>>>> mkw_hiv_mort
  return ret;
}
