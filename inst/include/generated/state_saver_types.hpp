// Generated by frogger: do not edit by hand
// This file is automatically generated. Do not edit this file. If you want to make changes
// edit `state_saver_types.hpp.in` and run `./scripts/generate` to regenerate.

#pragma once

#include "../intermediate_data.hpp"
#include "../model_variants.hpp"

namespace leapfrog {

template<typename ModelVariant, typename real_type>
struct ChildModelOutputState {
  ChildModelOutputState(int output_years) {}
};

template<typename ModelVariant, typename real_type>
struct BaseModelOutputState {
  Tensor3<real_type> p_total_pop;
  Tensor1<real_type> births;
  Tensor3<real_type> p_total_pop_natural_deaths;
  Tensor3<real_type> p_hiv_pop;
  Tensor3<real_type> p_hiv_pop_natural_deaths;
  Tensor4<real_type> h_hiv_adult;
  Tensor5<real_type> h_art_adult;
  Tensor4<real_type> h_hiv_deaths_no_art;
  Tensor3<real_type> p_infections;
  Tensor5<real_type> h_hiv_deaths_art;
  Tensor4<real_type> h_art_initiation;
  Tensor3<real_type> p_hiv_deaths;

  BaseModelOutputState(int output_years): 
    p_total_pop(
      StateSpace<ModelVariant>().base.pAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ),
    births(
      output_years
    ),
    p_total_pop_natural_deaths(
      StateSpace<ModelVariant>().base.pAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ),
    p_hiv_pop(
      StateSpace<ModelVariant>().base.pAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ),
    p_hiv_pop_natural_deaths(
      StateSpace<ModelVariant>().base.pAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ),
    h_hiv_adult(
      StateSpace<ModelVariant>().base.hDS,
      StateSpace<ModelVariant>().base.hAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ),
    h_art_adult(
      StateSpace<ModelVariant>().base.hTS,
      StateSpace<ModelVariant>().base.hDS,
      StateSpace<ModelVariant>().base.hAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ),
    h_hiv_deaths_no_art(
      StateSpace<ModelVariant>().base.hDS,
      StateSpace<ModelVariant>().base.hAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ),
    p_infections(
      StateSpace<ModelVariant>().base.pAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ),
    h_hiv_deaths_art(
      StateSpace<ModelVariant>().base.hTS,
      StateSpace<ModelVariant>().base.hDS,
      StateSpace<ModelVariant>().base.hAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ),
    h_art_initiation(
      StateSpace<ModelVariant>().base.hDS,
      StateSpace<ModelVariant>().base.hAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ),
    p_hiv_deaths(
      StateSpace<ModelVariant>().base.pAG,
      StateSpace<ModelVariant>().base.NS,
      output_years
    ) {
    p_total_pop.setZero();
    births.setZero();
    p_total_pop_natural_deaths.setZero();
    p_hiv_pop.setZero();
    p_hiv_pop_natural_deaths.setZero();
    h_hiv_adult.setZero();
    h_art_adult.setZero();
    h_hiv_deaths_no_art.setZero();
    p_infections.setZero();
    h_hiv_deaths_art.setZero();
    h_art_initiation.setZero();
    p_hiv_deaths.setZero();
  }
};

template<typename real_type>
struct ChildModelOutputState<ChildModel, real_type> {
  Tensor5<real_type> hc1_hiv_pop;
  Tensor5<real_type> hc2_hiv_pop;
  Tensor5<real_type> hc1_art_pop;
  Tensor5<real_type> hc2_art_pop;
  Tensor5<real_type> hc1_noart_aids_deaths;
  Tensor5<real_type> hc2_noart_aids_deaths;
  Tensor5<real_type> hc1_art_aids_deaths;
  Tensor5<real_type> hc2_art_aids_deaths;
  Tensor1<real_type> hc_art_num;

  ChildModelOutputState(int output_years): 
    hc1_hiv_pop(
      StateSpace<ChildModel>().children.hc1DS,
      StateSpace<ChildModel>().children.hcTT,
      StateSpace<ChildModel>().children.hc1AG,
      StateSpace<ChildModel>().base.NS,
      output_years
    ),
    hc2_hiv_pop(
      StateSpace<ChildModel>().children.hc2DS,
      StateSpace<ChildModel>().children.hcTT,
      StateSpace<ChildModel>().children.hc2AG,
      StateSpace<ChildModel>().base.NS,
      output_years
    ),
    hc1_art_pop(
      StateSpace<ChildModel>().base.hTS,
      StateSpace<ChildModel>().children.hc1DS,
      StateSpace<ChildModel>().children.hc1AG,
      StateSpace<ChildModel>().base.NS,
      output_years
    ),
    hc2_art_pop(
      StateSpace<ChildModel>().base.hTS,
      StateSpace<ChildModel>().children.hc2DS,
      StateSpace<ChildModel>().children.hc2AG,
      StateSpace<ChildModel>().base.NS,
      output_years
    ),
    hc1_noart_aids_deaths(
      StateSpace<ChildModel>().children.hc1DS,
      StateSpace<ChildModel>().children.hcTT,
      StateSpace<ChildModel>().children.hc1AG,
      StateSpace<ChildModel>().base.NS,
      output_years
    ),
    hc2_noart_aids_deaths(
      StateSpace<ChildModel>().children.hc2DS,
      StateSpace<ChildModel>().children.hcTT,
      StateSpace<ChildModel>().children.hc2AG,
      StateSpace<ChildModel>().base.NS,
      output_years
    ),
    hc1_art_aids_deaths(
      StateSpace<ChildModel>().base.hTS,
      StateSpace<ChildModel>().children.hc1DS,
      StateSpace<ChildModel>().children.hc1AG,
      StateSpace<ChildModel>().base.NS,
      output_years
    ),
    hc2_art_aids_deaths(
      StateSpace<ChildModel>().base.hTS,
      StateSpace<ChildModel>().children.hc2DS,
      StateSpace<ChildModel>().children.hc2AG,
      StateSpace<ChildModel>().base.NS,
      output_years
    ),
    hc_art_num(
      output_years
    ) {
    hc1_hiv_pop.setZero();
    hc2_hiv_pop.setZero();
    hc1_art_pop.setZero();
    hc2_art_pop.setZero();
    hc1_noart_aids_deaths.setZero();
    hc2_noart_aids_deaths.setZero();
    hc1_art_aids_deaths.setZero();
    hc2_art_aids_deaths.setZero();
    hc_art_num.setZero();
  }
};


template<typename ModelVariant, typename real_type>
struct BaseModelStateSaver {
public:
  void save_state(BaseModelOutputState<ModelVariant, real_type> &base_state,
                  const size_t i,
                  const State<ModelVariant, real_type> &state) {
    base_state.p_total_pop.chip(i, base_state.p_total_pop.NumDimensions - 1) = state.base.p_total_pop;
    base_state.p_total_pop_natural_deaths.chip(i, base_state.p_total_pop_natural_deaths.NumDimensions -
                                                  1) = state.base.p_total_pop_natural_deaths;
    base_state.p_hiv_pop.chip(i, base_state.p_hiv_pop.NumDimensions - 1) = state.base.p_hiv_pop;
    base_state.p_hiv_pop_natural_deaths.chip(i, base_state.p_hiv_pop_natural_deaths.NumDimensions -
                                                1) = state.base.p_hiv_pop_natural_deaths;
    base_state.h_hiv_adult.chip(i, base_state.h_hiv_adult.NumDimensions - 1) = state.base.h_hiv_adult;
    base_state.h_art_adult.chip(i, base_state.h_art_adult.NumDimensions - 1) = state.base.h_art_adult;
    base_state.births(i) = state.base.births;
    base_state.h_hiv_deaths_no_art.chip(i, base_state.h_hiv_deaths_no_art.NumDimensions -
                                           1) = state.base.h_hiv_deaths_no_art;
    base_state.p_infections.chip(i, base_state.p_infections.NumDimensions - 1) = state.base.p_infections;
    base_state.h_hiv_deaths_art.chip(i, base_state.h_hiv_deaths_art.NumDimensions -
                                        1) = state.base.h_hiv_deaths_art;
    base_state.h_art_initiation.chip(i, base_state.h_art_initiation.NumDimensions -
                                        1) = state.base.h_art_initiation;
    base_state.p_hiv_deaths.chip(i, base_state.p_hiv_deaths.NumDimensions - 1) = state.base.p_hiv_deaths;
    return;
  }
};

template<typename ModelVariant, typename real_type>
struct ChildModelStateSaver {
public:
  void save_state(ChildModelOutputState<ModelVariant, real_type> &full_state,
                  const size_t i,
                  const State<ModelVariant, real_type> &state) {}
};

template<typename real_type>
struct ChildModelStateSaver<ChildModel, real_type> {
public:
  void save_state(ChildModelOutputState<ChildModel, real_type> &children_state,
                  const size_t i,
                  const State<ChildModel, real_type> &state) {
    children_state.hc1_hiv_pop.chip(i, children_state.hc1_hiv_pop.NumDimensions - 1) =
        state.children.hc1_hiv_pop;
    children_state.hc2_hiv_pop.chip(i, children_state.hc2_hiv_pop.NumDimensions - 1) =
        state.children.hc2_hiv_pop;
    children_state.hc1_art_pop.chip(i, children_state.hc1_art_pop.NumDimensions - 1) =
        state.children.hc1_art_pop;
    children_state.hc2_art_pop.chip(i, children_state.hc2_art_pop.NumDimensions - 1) =
        state.children.hc2_art_pop;
    children_state.hc1_noart_aids_deaths.chip(i, children_state.hc1_noart_aids_deaths.NumDimensions - 1) =
      state.children.hc1_noart_aids_deaths;
    children_state.hc2_noart_aids_deaths.chip(i, children_state.hc2_noart_aids_deaths.NumDimensions - 1) =
      state.children.hc2_noart_aids_deaths;
    children_state.hc1_art_aids_deaths.chip(i, children_state.hc1_art_aids_deaths.NumDimensions - 1) =
      state.children.hc1_art_aids_deaths;
    children_state.hc2_art_aids_deaths.chip(i, children_state.hc2_art_aids_deaths.NumDimensions - 1) =
      state.children.hc2_art_aids_deaths;
  }
};

}
